//------------------------------------------------------
//
//	NAVIGATION - Main site navigation - non-mobile
//
//	location: 
//      /sass/components/_navigation.scss
//
//------------------------------------------------------


// this selector (.l-header) is here to differentiate between 
// this menu block and the one used for mobile nav
.l-header {
	@include breakpoint($nav-small-and-med) {
		display: none;
	}
	
	@include breakpoint($nav-large-up) {
		display: block;
		position: relative; // for non-fixed nav
		left: 0;
		width: 100%;
		z-index: 6;
		@include clearfix; // for non-fixed nav
		height: $header-height-medium;
	}
	@include breakpoint($nav-xlarge-up) {
		height: $header-height-large;
	}

	
	// List items
	nav.menu--main {
		//@include align-self($value: flex-end); // .l-constrained container uses flexbox
	    margin-left: auto; // somehow this makes it align right. magic!
				
		.menu {
			margin: 0;
			padding: 0;
			overflow: visible;
			position: relative;
			background-color: $nav-bar-bg-color;
			
			li {
				margin: 0;
				padding: 0;
				list-style-type: none;
				float: left;
				position: relative;
				font-family: $nav-font-family;
				font-weight: $nav-font-weight;
				line-height: $nav-line-height;
				
				&.leaf {
					list-style-image: none;
				}
				&.menu-item--active-trail {
					background-color: $nav-button-bg-active-color;
				}
				&.collapsed {
					list-style-image: none;
				}
				&.expanded {
					list-style-image: none;
				}
				
				&:before {
					@include transition($property,$time,$function);
					width: 0;
				}
				
				// keeps main nav link in a persistent hover state while cursor moves to subnav list
				&:hover {
					background-color: $nav-button-bg-hover-color;
					
					&:before {
						display: block;
					    content: "";
					    height: 3px;
					    background: $primary-color;
					    text-align: center;
					    position: absolute;
					    top: 0;
					    @include centerX;
					    animation: nav-border-animation 0.3s ease-in-out forwards;
					    animation-delay: 0;
					}
					> a {
						background-color: $primary-color;
						color: $nav-text-hover-color;
					}
				}
				
				// Nav button links
				> a.main-nav {
					display: block;
					color: $nav-text-color;
					background-color: $nav-button-bg-color;
					letter-spacing: 0.02em;
					font-weight: bold;
					
					@include breakpoint($small-only) {
						@include font-size(17px);
						padding: 10px;
					}
					@include breakpoint($nav-medium-only) {
						@include font-size(18px);
						padding: 22px 10px 20px;
					}
					@include breakpoint($nav-large-only) {
						@include font-size(18px);
						padding: 22px 10px 20px;
					}
					@include breakpoint($nav-xlarge-up) {
						@include font-size(20px);
						padding: 22px 15px 22px;
					}
					
					&:hover {
						color: $nav-text-hover-color;
						background-color: $nav-button-bg-hover-color;
						text-decoration: none;
					}
					&.active-trail,
					&.active-trail:hover {
						background-color: $nav-button-bg-active-color;
					}
					
					// USER menu item
					&.nav-user {
						display: block;
					    overflow: hidden;
					    height: 0;
					    font-size: 0;
					    background: url(../images/icons/icon_user.svg) no-repeat scroll center center;
						background-size: 25px auto;
					    
					    &:hover {
							background-color: $nav-button-bg-hover-color;
					    }
					    
					    @include breakpoint($nav-medium-up) {
						    padding-top: 40px;
						    width: 30px;
						    background-size: 18px auto;
					    }
					    @include breakpoint($nav-xlarge-up) {
						    padding-top: 42px;
						    width: 50px;
						    background-size: 25px auto;
					    }
					}
				}
								
				/* sub nav menus */
				ul.menu {
					position: absolute;
					left: 0;
					visibility: hidden;
					@include transition-opacity;
					background-color: $subnav-bar-bg-color;
					left: -9999px; // hide offscreen when not needed - more accessible than display:none
					
					@include breakpoint($nav-medium-only) {
						top: $header-clear-nav-medium;
						min-width: 170px;
					}
					@include breakpoint($nav-large-up) {
						top: $header-clear-nav-medium;
						min-width: 170px;
					}
					@include breakpoint($nav-xlarge-up) {
						top: $header-clear-nav-large;
						min-width: 170px;
					}
					
					
				
					li {
						float: none;
						overflow: hidden;
						
						a.sub-nav {
							padding: 10px 22px;
							color: $subnav-text-color;
							background-color: $subnav-button-bg-color;
							@include font-size(14px);
							font-family: $subnav-font-family;
							font-weight: $subnav-font-weight;
							line-height: $subnav-line-height;
							display: block;
							
							@include breakpoint($nav-medium-only) {
								@include font-size(14px);
							}
							@include breakpoint($nav-large-up) {
								@include font-size(17px);
							}
							
							&:hover,
							&:active,
							&.active-trail {
								color: $subnav-text-hover-color;
								background-color: $subnav-button-bg-hover-color;
								text-decoration: none;
							}
							&:hover {
								padding-left: 25px;
							}
						}
						&:hover:before {
							display: none;
						}
					}
				}
				
				// show sub-menu on hover
				&:hover ul.menu {
					display: block;
					opacity: 1;
					visibility: visible;
					left: 0;
				}
				
				// shift user nav sub-menu over to align with right edge
				// so doesn't go off screen
				&:last-child:hover ul.menu {
					left: -80px;
				}
			}
		}
	}
}

// Contact Navigation (in pre-header)


.nav-contact {
    margin-right: 30px;
    
    @include breakpoint($nav-small-and-med) {
	    display: none;
    }
	
	ul.menu {
	    margin: 0;
	    padding: 0;
	    
	    li {
		    list-style-type: none;
		    margin: 0;
		    padding: 0;
		}
	}
	
	a {
	    color: #ccc;
	    padding: 6px 10px;
	    display: block;
	    
	    &:hover {
		    background: #fc6c11;
		    color: #fff;
		    text-decoration: none;
		}
	}
}



// Animation
@keyframes nav-border-animation {
	0% {
		width: 0;
	}
	100% {
		width: 100%;
	}
}
@-webkit-keyframes nav-border-animation {
	0% {
		width: 0;
	}
	100% {
		width: 100%;
	}
}