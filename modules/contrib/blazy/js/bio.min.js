!function(o,t){"use strict";"function"==typeof define&&define.amd?define([window.dBlazy],t):"object"==typeof exports?module.exports=t(window.dBlazy):o.Bio=t(window.dBlazy)}(this,function(o){"use strict";function t(o){var t=this;t.options=i.extend({},t.defaults,o||{}),u=!1,d=!1,n(t)}function n(o){var t={rootMargin:o.options.rootMargin,threshold:o.options.threshold};o.options.selector=o.options.selector+":not(."+o.options.successClass+")",o.elms=(o.options.root||s).querySelectorAll(o.options.selector),o.count=o.elms.length,o.windowWidth=e.innerWidth||s.documentElement.clientWidth||s.body.clientWidth||e.screen.width,o.prepare(),o.observer=new IntersectionObserver(o.observing.bind(o),t),d||(o.observe(),d=!0)}var e=window,s=document,i=o,r=0,c=0,u=!1,d=!1,a=t.prototype;return a.constructor=t,a.count=0,a.counted=-1,a.erCounted=0,a._er=-1,a._ok=1,a.defaults={root:null,disconnect:!1,error:!1,success:!1,intersecting:!1,observing:!1,successClass:"b-loaded",selector:".b-lazy",errorClass:"b-error",bgClass:"b-bg",rootMargin:"0px",threshold:[0]},a.load=function(o){var t=this;t.isValid(o)?t.intersecting(o):i.forEach(o,function(o){t.isValid(o)&&t.intersecting(o)}),u||t.disconnect()},a.isLoaded=function(o){return o.classList.contains(this.options.successClass)},a.isValid=function(o){return"object"==typeof o&&void 0===o.length&&!this.isLoaded(o)},a.prepare=function(){},a.revalidate=function(o){var t=this;(t.count!==t.counted||!0===o)&&c<t.counted&&(u=!1,t.elms=(t.options.root||s).querySelectorAll(t.options.selector),t.observe(),c++)},a.intersecting=function(o){var t=this;"function"==typeof t.options.intersecting&&t.options.intersecting(o,t.options),i.trigger(o,"bio.intersecting",{options:t.options}),t.lazyLoad(o),t.counted++,u||t.observer.unobserve(o)},a.lazyLoad=function(o){},a.success=function(o,t,n){var e=this;"function"==typeof e.options.success&&e.options.success(o,t,n,e.options),e.erCounted>0&&e.erCounted--},a.error=function(o,t,n){var e=this;"function"==typeof e.options.error&&e.options.error(o,t,n,e.options),e.erCounted++},a.loaded=function(o,t,n){var e=this;e[t===e._ok?"success":"error"](o,t,n),o.classList.add(t===e._ok?e.options.successClass:e.options.errorClass)},a.equal=function(o,t){return o.nodeName.toLowerCase()===t},a.observe=function(){var o=this;r=o.elms.length,i.forEach(o.elms,function(t){o.isLoaded(t)||o.observer.observe(t)})},a.observing=function(o,t){var n=this;n.entries=o,u||(i.forEach(o,function(o){"function"==typeof n.options.observing&&n.options.observing(o,t,n.options),(o.isIntersecting||o.intersectionRatio>0)&&(n.isLoaded(o.target)||n.intersecting(o.target),r--)}),n.disconnect())},a.disconnect=function(o){var t=this;t.erCounted>0&&!o||((0===r||t.count===t.counted)&&t.options.disconnect||o)&&(t.observer.disconnect(),t.count=0,t.elms=null,u=!0)},a.destroy=function(o){var t=this;t.disconnect(o),t.observer=null},a.disconnected=function(){return u},a.reinit=function(){u=!1,d=!1,n(this)},t});
